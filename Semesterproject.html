<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Wartezeit an ÖV-Haltestelem beim Reisebeginn</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Semesterproject_files/libs/clipboard/clipboard.min.js"></script>
<script src="Semesterproject_files/libs/quarto-html/quarto.js"></script>
<script src="Semesterproject_files/libs/quarto-html/popper.min.js"></script>
<script src="Semesterproject_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Semesterproject_files/libs/quarto-html/anchor.min.js"></script>
<link href="Semesterproject_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Semesterproject_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Semesterproject_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Semesterproject_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Semesterproject_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="Semesterproject_files/libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="Semesterproject_files/libs/jquery-1.12.4/jquery.min.js"></script>
<link href="Semesterproject_files/libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="Semesterproject_files/libs/leaflet-1.3.1/leaflet.js"></script>
<link href="Semesterproject_files/libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="Semesterproject_files/libs/proj4-2.6.2/proj4.min.js"></script>
<script src="Semesterproject_files/libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="Semesterproject_files/libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="Semesterproject_files/libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="Semesterproject_files/libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="Semesterproject_files/libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Wartezeit an ÖV-Haltestelem beim Reisebeginn</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="hintergrund-und-forschungsziele" class="level1">
<h1>1 Hintergrund und Forschungsziele</h1>
<p>(Zeit ist Geld (Effizienzsteigerung) versus Bewusst und Entspannt durchs Leben gehen -&gt;Literatur, Öv CH superpünktlich, geringe Wartezeiten bzw Wartezeit selbstverschuldet)</p>
<p>Passagiere empfinden in der Regel das Warten an Haltestellen des Öffentlichen Verkehrs (ÖV) als äusserst lästig (van Hagen 2011). Die Schweizer ÖV sind international bekannt für ihre Pünktlichkeit (Kaindl 2022), wodurch die Länge der Wartezeit zu Beginn einer Reise meist selbstverschuldet ist. Nach Csiskos &amp; Currie (2008) gibt es zwei verschiedene Arten von Fahrgastverhalten: Eine Gruppe kommt zufällig an, während eine andere Gruppe aktiv versucht, ihre Wartezeit zu minimieren, indem sie rechtzeitig zur geplanten Abfahrtszeit bei der Haltestelle ankommt. Evtl. Blabla zu AnalyseWerkzeugen, how fast is a cow und so.. oder erst in Diskussion</p>
<p>In unserer Projektarbeit möchten wir unsere tägliche Wartezeit an Haltestellen von öffentlichen Verkehrsmitteln (ÖV) untersuchen. Dabei wird ausschliesslich der Beginn einer Reise betrachtet. Folgende Fragen sollen anhand zweier leicht unterschiedlicher Methoden beantwortet werden: • Wie oft reisen wir mit den ÖV? • Sind die Wartezeiten von Reise zu Reise unterschiedlich lang? • Wer verbringt durchschnittlich mehr Wartezeit an den Haltestellen? • Kommen unsere beiden methodischen Herangehensweisen zu den gleichen Resultaten?</p>
</section>
<section id="methode" class="level1">
<h1>2 Methode</h1>
<section id="daten" class="level2">
<h2 class="anchored" data-anchor-id="daten">2.1 Daten</h2>
<p>Die Daten bestehen aus eigenen Bewegungsdaten, welche mit der Applikation Posmo Project (Datamap AG, Version 22.01.16, 2023) erfasst wurden. Daten wurden vom 03.05.23 bis 21.06.23 mit einer Frequenz der Lokalisierungsdaten von 10 Sekunden aufgenommen. Fand keine deutliche Bewegung statt, wurden die Datenpunkte durch Posmo automatisch entfernt. Diese Daten liegen als CSV-Datei vor und beinhalten u.a. Datum &amp; Zeit („datetime”), x-Koordinaten („long_x”), y-Koordinaten („lat_y”) und Transportmodus („transport_mode”). Zusätzlich wird der Datensatz „Haltestellen des öffentlichen Verkehrs” vom Bundesamt für Verkehr (BAV) verwendet (QUELLE https://data.geo.admin.ch/ch.bav.haltestellen-oev/haltestellen-oev/haltestellen-oev_2056_de.csv.zip).</p>
</section>
<section id="r-vorbereitung" class="level2">
<h2 class="anchored" data-anchor-id="r-vorbereitung">R: Vorbereitung</h2>
<section id="r-libraries-laden" class="level3">
<h3 class="anchored" data-anchor-id="r-libraries-laden">R: Libraries laden</h3>
<div class="cell">

</div>
</section>
<section id="r-daten-einlesen" class="level3">
<h3 class="anchored" data-anchor-id="r-daten-einlesen">R: Daten einlesen</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Daten von Stefan (ab 29.04.2023)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>stefan <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">"posmo_Stefan_23-05-03_06-21.csv"</span>, <span class="at">delim =</span> <span class="st">","</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>stefan<span class="sc">$</span>person <span class="ot">&lt;-</span> <span class="st">"Stefan"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Daten von Miriam (ab xx.05.2023)</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>miriam <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">"posmo_Miriam_23-05-03_06-21.csv"</span>, <span class="at">delim =</span> <span class="st">","</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>miriam<span class="sc">$</span>person <span class="ot">&lt;-</span> <span class="st">"Miriam"</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Schweizergrenze für Visualisierung</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>schweiz <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"schweiz.gpkg"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Daten zusammenführen</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>posmo <span class="ot">&lt;-</span> <span class="fu">rbind</span>(stefan, miriam)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># nicht relevante Spalten entfernen</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>posmo <span class="ot">&lt;-</span> posmo <span class="sc">|&gt;</span> </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>user_id, <span class="sc">-</span>weekday, <span class="sc">-</span>place_name)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># NA finden &amp; entfernen</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>posmo[<span class="sc">!</span><span class="fu">complete.cases</span>(posmo), ] <span class="co"># Zeigt Zeilen mit NA an</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 999 × 5
   datetime            transport_mode lon_x lat_y person
   &lt;dttm&gt;              &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
 1 2023-05-02 22:00:00 &lt;NA&gt;            8.70  47.1 Stefan
 2 2023-05-03 03:25:11 &lt;NA&gt;            8.70  47.1 Stefan
 3 2023-05-03 04:52:23 &lt;NA&gt;            8.70  47.1 Stefan
 4 2023-05-03 05:47:14 &lt;NA&gt;            8.72  47.1 Stefan
 5 2023-05-03 06:06:45 &lt;NA&gt;            8.74  47.1 Stefan
 6 2023-05-03 06:45:46 &lt;NA&gt;            8.69  47.2 Stefan
 7 2023-05-03 06:49:17 &lt;NA&gt;            8.70  47.2 Stefan
 8 2023-05-03 11:59:45 &lt;NA&gt;            8.71  47.2 Stefan
 9 2023-05-03 12:41:15 &lt;NA&gt;            8.67  47.2 Stefan
10 2023-05-03 13:02:35 &lt;NA&gt;            8.68  47.2 Stefan
# … with 989 more rows</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>posmo <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(posmo)<span class="co"># Spalten mit NA entfernen</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Geometrie hinzufügen</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>posmo <span class="ot">&lt;-</span> posmo <span class="sc">|&gt;</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"lon_x"</span>, <span class="st">"lat_y"</span>), <span class="at">crs =</span> <span class="dv">4326</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span>  <span class="co"># Geometrie hinzufügen</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="dv">2056</span>) <span class="co"># transformieren CH1903+ LV95: 2056</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Schweizer Koordinaten zu sf-Tabelle hinzufügen</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>posmo_coordinates <span class="ot">&lt;-</span> <span class="fu">st_coordinates</span>(posmo)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>posmo <span class="ot">&lt;-</span> <span class="fu">cbind</span>(posmo, posmo_coordinates)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co"># WGS Koordinaten entfernen </span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>posmo <span class="ot">&lt;-</span> posmo <span class="sc">|&gt;</span> </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>lon_x, <span class="sc">-</span>lat_y)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Daten anschauen</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(posmo, <span class="fu">aes</span>(X, Y, <span class="at">color =</span> person))<span class="sc">+</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>()<span class="sc">+</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>()<span class="sc">+</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Miriam"</span> <span class="ot">=</span> <span class="st">"#3182bd"</span>, <span class="st">"Stefan"</span> <span class="ot">=</span> <span class="st">"#c51b8a"</span>))<span class="sc">+</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>posmo_filtered <span class="ot">&lt;-</span> posmo <span class="sc">|&gt;</span>  <span class="co"># nur posmo daten innerhalb Rechteck um schweiz</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_crop</span>(<span class="fu">st_as_sfc</span>(<span class="fu">st_bbox</span>(schweiz)))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># posmo_clipped &lt;- st_intersection(posmo, schweiz) # nur posmo daten innerhalb von schweiz, geht lange...</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> schweiz, <span class="at">fill=</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> posmo_filtered, <span class="fu">aes</span>(<span class="at">colour =</span> person))<span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Miriam"</span> <span class="ot">=</span> <span class="st">"#3182bd"</span>, <span class="st">"Stefan"</span> <span class="ot">=</span> <span class="st">"#c51b8a"</span>))<span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="co"># Achsen und Raster verschwinden</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-2-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="datenvorverarbeitung" class="level2">
<h2 class="anchored" data-anchor-id="datenvorverarbeitung">2.2 Datenvorverarbeitung</h2>
<p>Die Posmo-App ist noch in der Entwicklung und zeichnet die Transportmodi nicht immer korrekt auf. Die Daten wurden deshalb von uns auf POSMO (datamap.io) überprüft und falls nötig die Transportart von Hand angepasst.</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">2.3 Methods</h2>
<section id="herangehensweise-geschwindigkeit" class="level3">
<h3 class="anchored" data-anchor-id="herangehensweise-geschwindigkeit">2.3.1 Herangehensweise «Geschwindigkeit»</h3>
<p>Um den Start einer Reise zu finden, werden die Daten auf eine bestimmte Abfolge von Bewegungen (Segmente) durchsucht. Zu Beginn darf keine Bewegung stattfinden, man ist zum Beispiel zu Hause oder bei der Arbeit. Dafür muss zwischen zwei Datenpunkten eine Zeitdifferenz über dem gewählten Schwellenwert von zehn Minuten liegen. Die restlichen Datenpunkte werden anhand der Geschwindigkeit in Segmente mit langsamer oder schneller Bewegung eingeteilt. Als langsam werden Bewegungen kleiner als 45 km/h klassifiziert. Bewegungen gleich oder grösser als 45 km/h werden als schnell klassifiziert.</p>
<section id="r-g-geschwindigkeit-berechnen" class="level4">
<h4 class="anchored" data-anchor-id="r-g-geschwindigkeit-berechnen">R: G: Geschwindigkeit berechnen</h4>
<div class="cell">

</div>
</section>
<section id="r-g-moving-window" class="level4">
<h4 class="anchored" data-anchor-id="r-g-moving-window">R: G: Moving Window</h4>
<div class="cell">

</div>
</section>
<section id="r-g-einteilung-stayslowfast" class="level4">
<h4 class="anchored" data-anchor-id="r-g-einteilung-stayslowfast">R: G: Einteilung stay/slow/fast</h4>
<div class="cell">

</div>
<p>Um den Start einer Reise zu finden, muss folgende Abfolge der Segmente vorliegen:</p>
<ul>
<li>keine Bewegung (Person über längere Zeit (difftime &gt;10 min) am selben Ort)</li>
<li>langsame Bewegung (Gehen/Fahrrad)</li>
<li>schnelle Bewegung (ÖV)</li>
</ul>
<p>Die Wartezeit kann anschliessend für alle gefundenen Events berechnet werden (difftime (min(Segment schnell), max(Segment langsam))).</p>
</section>
<section id="r-g-evente-finden" class="level4">
<h4 class="anchored" data-anchor-id="r-g-evente-finden">R: G: Evente finden</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] datetime_slow       transport_mode_slow person_slow        
 [4] velocity_text_slow  haltestelle_x_slow  haltestelle_y_slow 
 [7] id                  datetime_fast       transport_mode_fast
[10] person_fast         velocity_text_fast  haltestelle_x_fast 
[13] haltestelle_y_fast  check              
&lt;0 Zeilen&gt; (oder row.names mit Länge 0)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "datetime_slow"       "transport_mode_slow" "person_slow"        
 [4] "velocity_text_slow"  "haltestelle_x_slow"  "haltestelle_y_slow" 
 [7] "id"                  "datetime_fast"       "transport_mode_fast"
[10] "person_fast"         "velocity_text_fast"  "haltestelle_x_fast" 
[13] "haltestelle_y_fast"  "check"              </code></pre>
</div>
</div>
<p>Die räumlichen Startpunkte der Reisen wurden mit den ÖV-Haltestellen aus dem Datensatz „Haltestellen des öffentlichen Verkehrs” validiert, wodurch Reisen mit dem Auto wegfallen. Dafür wurde ein Buffer von 100 Metern um ÖV-Haltestellen mit den Positionsdaten der Wartezeit verschnitten.</p>
</section>
<section id="r-g-evente-validieren" class="level4">
<h4 class="anchored" data-anchor-id="r-g-evente-validieren">R: G: Evente validieren</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="r-g-velocity-wartezeit-berechnen" class="level4">
<h4 class="anchored" data-anchor-id="r-g-velocity-wartezeit-berechnen">R: G: Velocity: Wartezeit berechnen</h4>
<div class="cell">

</div>
<p>###2.3.2 Herangehensweise «Klassifizierung»</p>
<p>Um zu validieren, wie gut unsere geschwindigkeitsabhängige Methode funktioniert, machen wir eine zusätzliche Analyse mit den Angaben der Transportmodi von Posmo.</p>
</section>
</section>
<section id="r-t-vorgehen-transportmodus" class="level3">
<h3 class="anchored" data-anchor-id="r-t-vorgehen-transportmodus">R: T: Vorgehen “Transportmodus”</h3>
<section id="r-t-einteilung-stayslowpublic" class="level4">
<h4 class="anchored" data-anchor-id="r-t-einteilung-stayslowpublic">R: T: Einteilung stay/slow/public</h4>
<div class="cell">

</div>
<p>Dabei werden die Daten auf eine bestimmte Abfolge anhand des angegebene Transportmodus durchsucht.</p>
<ul>
<li>keine Bewegung (Person über längere Zeit (difftime &gt;10 min) am selben Ort)</li>
<li>Transportmodus Walk/Bike</li>
<li>Transportmodus Bus/Train/Tram</li>
</ul>
<p>Die Wartezeit kann anschliessend für alle gefundenen Events berechnet werden (difftime (min(Segment schnell), max(Segment langsam))).</p>
</section>
<section id="r-t-evente-finden" class="level4">
<h4 class="anchored" data-anchor-id="r-t-evente-finden">R: T: Evente finden</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] "datetime_slow"         "transport_mode_slow"   "person_slow"          
 [4] "X_slow"                "Y_slow"                "time_slow"            
 [7] "Moving_slow"           "moving_class_slow"     "id"                   
[10] "datetime_public"       "transport_mode_public" "person_public"        
[13] "X_public"              "Y_public"              "time_public"          
[16] "Moving_public"         "moving_class_public"  </code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="probleme-und-grenzen" class="level2">
<h2 class="anchored" data-anchor-id="probleme-und-grenzen">2.4 Probleme und Grenzen</h2>
<p>Bei der Herangehensweise «Geschwindigkeit» sich durch das setzen des Schwellenwerts für die Geschwindigkeit ein Problem. Wird der Schwellenwert zu tief gesetzt, können Bewegungen auf dem Weg zu der Haltestelle bereits als schnelle Bewegung eingestuft werden, obwohl wir diese als langsame Bewegungen haben möchten. Ein Beispiel: Stefan geht oft mit dem Fahrrad zur ÖV-Haltestelle und erreicht dabei Geschwindigkeiten über 40 km/h. Deshalb wurde der Schwellenwert auf 45 km/h gesetzt. Nun kann es aber sein, dass das öffentliche Verkehrsmittel beim Start der Reise langsam fährt und diese Bewegung als langsame Bewegung eingestuft wird. Dies hat zur Folge, dass sich die Wartezeit auf 15 Sekunden, also die Zeit zwischen zwei Datenpunkten beschränkt und nicht der Wahrheit entspricht. Die Daten werden verfälscht.</p>
<p>Bei der Herangehensweise «Klassifizierung» sind wir auf die Qualität von Posmo angewiesen. Den Transportmodus können wir manuell anpassen, die Segmente sind aber relativ fix (Erfahrungen haben gezeigt, dass die Funktion «split segment» nicht einwandfrei funktioniert). Es kam einige Male vor, dass langsame und schnelle Bewegungen am Start einer Reise als ein Segment dargestellt wurde. Der Transportmodus war dann entweder Bus, Train oder Tram. Da dadurch eine Segment der Transportmodus Walk oder Bike fehlte, wurde auch kein Start einer Reise erkannt. Dies ist ein Verlust eines Datenpunktes aber keine Verfälschung der Daten.</p>
<p>Aufgrund der Frequenz der Lokalisierung, können die Wartezeiten nur auf 10 Sekunden genau sein.</p>
</section>
</section>
<section id="resultate" class="level1">
<h1>3 Resultate</h1>
<section id="r-g-visualisierung" class="level4">
<h4 class="anchored" data-anchor-id="r-g-visualisierung">R: G: Visualisierung</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-11-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-11-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Two Sample t-test

data:  wartezeit by person
t = 1.6571, df = 58, p-value = 0.1029
alternative hypothesis: true difference in means between group Miriam and group Stefan is not equal to 0
95 percent confidence interval:
 -0.2263252  2.4030109
sample estimates:
mean in group Miriam mean in group Stefan 
            3.005200             1.916857 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-11-5.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-11-6.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-11-7.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-11-8.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-11-9.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-11-10.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-11-11.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="r-t-visualisierung" class="level4">
<h4 class="anchored" data-anchor-id="r-t-visualisierung">R: T: Visualisierung</h4>
<div class="cell">
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.881176</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  Group.1        x
1  Miriam 3.316162
2  Stefan 2.605128</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  Group.1    x
1  Miriam 8.35
2  Stefan 9.65</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  Group.1          x
1  Miriam 0.01666667
2  Stefan 0.03333333</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
0.01667 0.16667 3.00000 2.88118 5.01667 9.65000 </code></pre>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-12-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-12-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-12-5.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-12-6.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<div id="htmlwidget-71dce818cc92ea62f6a7" style="width:100%;height:464px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-71dce818cc92ea62f6a7">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addProviderTiles","args":["NASAGIBS.ViirsEarthAtNight2012",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]}],"setView":[[48.85,2.34],5,[]]},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output-display">
<div id="htmlwidget-f1c7dd32db934d29c3c0" style="width:100%;height:464px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-f1c7dd32db934d29c3c0">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[47.0870540100126,47.2083770100598,46.4079230094403,46.5499110094417,47.2086690100642,47.2083770100598,47.5486750104794,47.4837730104683,47.5268190104561,47.3784470101658,47.2083770100598,47.5483900104775,47.557467010484,47.4838340104684,47.3594770104001,47.4412920104433,47.3780310101662,47.2083770100598,47.5720720104792,47.4838420104683,47.3618410104678,47.2083770100598,46.292121009991,46.3153820099735,47.2083770100598,47.2083770100598,47.3595110104,47.5535870104784,47.4839000104683,47.378531010166,47.2083770100598,47.4838390104685,47.4677450104489,46.9674400097143,46.7937710094069,47.2083770100598,47.1707960102184,47.5513910104789,47.4836230104684,47.3596620104002,47.5328230104576,47.2083770100598,47.0433190101125,47.2083770100598,47.1782460101214,47.1733730101057,47.2083770100598,47.5487520104774,47.4836900104685,47.5513780104789,47.4838130104682,47.492608009926,47.4832580101328,47.2293040100764,47.2293040100764,47.4832780101328,47.2293040100764,47.4874350101325,47.2293040100764,47.2293040100764,47.4833380101328,47.2293040100764,47.4831710101327,47.2293040100764,47.4977620101469,47.4832050101327,47.4832370101328,47.4651760101276,47.4123230101304,47.4831920101327,47.2293040100764,47.401867010169,47.4831730101328,47.4833460101328,47.2293040100764,47.4831890101328,47.2293040100764,47.4833200101328,47.2293040100764,47.4833010101327,47.2183930100719,47.4831300101328,47.4874350101325,47.2293040100764,47.0793800103853],[8.7221260086554,8.70747800860422,9.70148500978508,9.8884660099098,8.69269200858984,8.70747800860422,7.58282300738035,7.54686700736095,7.64751700745304,8.53782700838742,8.70747800860422,7.58976700738759,7.57526200737012,7.5463540073604,7.65582700750758,7.59198600741926,8.53597200838575,8.70747800860422,7.61147100740337,7.54699600736107,7.38926900722876,8.70747800860422,7.53282300763962,7.65181500776294,8.70747800860422,8.70747800860422,7.65603700750779,7.59241300738888,7.54700600736106,8.53720000838678,8.70747800860422,7.54601100736005,7.60307100742352,9.55404100947369,10.2862220101746,8.70747800860422,8.09789000801228,7.58795200738489,7.54624300736034,7.6558960075076,7.64885900745275,8.70747800860422,8.3145570082665,8.70747800860422,8.45750400836943,8.50659600841919,8.70747800860422,7.59072100738848,7.5462140073603,7.58798300738492,7.54717600736126,9.43612400918815,8.76160400856916,8.6752190085666,8.6752190085666,8.76169600856923,8.6752190085666,8.76681200857275,8.6752190085666,8.6752190085666,8.76163400856916,8.6752190085666,8.76166100856925,8.6752190085666,8.7291420085336,8.76167700856924,8.76168300856923,8.76034400857382,8.69581300852919,8.76172300856929,8.6752190085666,8.55262800839451,8.76144400856903,8.76165600856918,8.6752190085666,8.76154900856913,8.6752190085666,8.76165700856919,8.6752190085666,8.76164000856918,8.67770000857236,8.76145700856906,8.76681200857275,8.6752190085666,7.31302000721921],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,["Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Stefan","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam","Miriam"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[46.292121009991,47.5720720104792],"lng":[7.31302000721921,10.2862220101746]}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output-display">
<p><img src="Semesterproject_files/figure-html/unnamed-chunk-12-9.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="diskussion" class="level1">
<h1>4 Diskussion</h1>
<p>Die Herangehensweise «Geschwindigkeit» zeigt auf, dass die Transportmodi nicht einzig aufgrund deren Geschwindigkeit eingeteilt werden können. Die Daten werden verfälscht und können nicht interpretiert werden. Die Herangehensweise «Klassifizierung» ergibt deutlich bessere Daten. Bei diesem Vorgehen waren wir aber darauf angewiesen, dass wir bereits vorgegebene Segmente hatten und diese nur noch klassifizieren oder validieren mussten. Dies ist Zeitintensiv und für grössere Datensätze nicht denkbar. So können auch nur Daten bearbeitet werden, wovon man weiss, welcher Transportmodus verwendet wurde.</p>
<p>Um die Auswertung auch auf grössere und fremde Datensätze auszuweiten, wäre eine Verbesserung der Erkennung des Transportmodus von Vorteil. Busse und Trams wurden zum Beispiel immer als Autos klassifiziert. Hierfür wäre vielleicht ein Abgleich mit Datensätzen des öffentlichen Verkehrs möglich. Zudem gab es manchmal Segmente, bei welchen der Transportmodus als unbekannt gesetzt wurde. Dennoch würde eine entsprechende Fragestellung, welche sich nur auf den Zugdaten (inkl. Walk und Bike) bezieht bereits mit der jetzigen Erkennung der Transportmodi relativ gut funktionieren.</p>
</section>
<section id="literatur" class="level1">
<h1>5 Literatur</h1>
<p>Csikos, D., &amp; Currie, G. (2008). Investigating Consistency in Transit Passenger Arrivals: Insights from Longitudinal Automated Fare Collection Data. Transportation Research Record, 2042(1), 12–19. https://doi.org/10.3141/2042-02</p>
<p>Kaindl, F. (2022). Reisen mit der Bahn: In welchen Ländern die Züge besonders pünktlich sind. Merkur.de https://www.merkur.de/reise/zuege-puenktlich-fernverkehr-bahn-europa-schweiz-daenemark-niederlande-zr-91977341.html#:~:text=In%20der%20Schweiz%20fahren%20Z%C3%BCge%20am%20p%C3%BCnktlichsten%20Am,viele%20Gedanken%20%C3%BCber%20Versp%C3%A4tungen%20innerhalb%20des%20Landes%20machen.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>